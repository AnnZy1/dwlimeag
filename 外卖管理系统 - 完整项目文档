外卖管理系统 - 完整项目文档（Web + 后端版，无 Redis / 小程序）
文档说明
本文档为完整落地版项目清单，基于 Spring Boot+Vue3+MyBatis+OSS+MySQL 技术栈（仅 Web 管理端 + 后端），补充完整数据库表结构，覆盖全模块详细接口，无任何偷懒简化，可直接用于开发、测试、交付全流程。
一、项目概述（同前，补充核心约束）
核心约束：仅支持 Web 管理端操作，无 C 端 / 小程序功能，数据存储依赖 MySQL+OSS，无 Redis 中间件
核心价值：聚焦餐饮商家管理效率，实现菜品 / 套餐 / 订单 / 员工 / 权限的全流程闭环管理
二、技术栈清单（无变更，确保核心依赖完整）
2.1 后端技术栈
技术 / 组件	版本	核心用途
Spring Boot	3.2.x	核心框架，简化配置
MyBatis + MyBatis-Plus	3.5.x	数据访问层，MP 简化 CRUD / 分页 / 条件查询
Spring Security + JWT	-	员工认证授权，Token 生成 / 校验
Spring Validation	-	后端参数校验（非空 / 格式 / 唯一性）
PageHelper	1.4.x	分页查询支持
Lombok	1.18.x	简化实体类代码
Spring AOP	-	操作日志 / 权限拦截 / 敏感操作监控
阿里云 OSS	-	菜品 / 套餐图片存储
EasyExcel	3.3.x	批量导入导出（菜品 / 订单 / 员工）
Knife4j (Swagger)	4.4.x	接口文档生成 / 在线调试
Logback	-	操作日志 / 异常日志记录
MySQL	8.0.x	核心数据库（存储所有业务数据）
Hutool	5.8.x	工具类库（加密 / 日期 / 字符串处理）
JJWT	0.11.x	JWT Token 生成与解析
2.2 前端技术栈
技术 / 组件	版本	核心用途
Vue 3	3.4.x	前端核心框架（组件化开发）
Vite	5.0.x	项目构建工具（快速热更新）
Vue Router 4	4.2.x	路由管理（页面跳转 / 权限守卫）
Pinia	2.1.x	状态管理（存储员工信息 / Token / 权限列表）
Element Plus	2.4.x	管理端 UI 组件库（表格 / 表单 / 弹窗 / 分页）
Axios	1.6.x	网络请求封装（统一 Token / 异常处理）
ECharts 5	5.4.x	数据可视化（营业统计 / 销量排行）
VeeValidate	4.12.x	前端表单校验（提前拦截非法输入）
NProgress	0.2.x	页面加载进度条（提升体验）
FileSaver + XLSX	-	前端 Excel 导出辅助
三、数据库设计清单（完整补充，无遗漏）
3.1 表结构总览（15 张核心表，覆盖全业务）
序号	表名	中文名称	核心用途
1	employee	员工表	存储员工基础信息、账号状态、权限关联
2	role	角色表	存储角色信息（管理员 / 后厨 / 财务等）
3	permission	权限表	存储菜单 / 按钮权限（如 “菜品删除”“订单导出”）
4	role_permission	角色权限关联表	关联角色与权限，实现权限分配
5	category	分类表	存储菜品 / 套餐分类（如 “热菜”“双人套餐”）
6	dish	菜品表	存储菜品基础信息、关联分类、OSS 图片地址
7	dish_flavor	菜品口味表	存储菜品口味（如 “辣度：微辣 / 中辣”）
8	setmeal	套餐表	存储套餐基础信息、关联分类、OSS 图片地址
9	setmeal_dish	套餐菜品关系表	关联套餐与菜品，存储菜品份数 / 单价（冗余设计）
10	orders	订单表	存储订单核心信息（状态 / 金额 / 收货信息 / 支付信息）
11	order_detail	订单明细表	存储订单商品明细（菜品 / 套餐 / 口味 / 数量）
12	branch	分店表	存储分店基础信息（名称 / 地址 / 联系人）
13	operation_log	操作日志表	存储员工敏感操作记录（增删改 / 批量操作）
14	login_log	登录日志表	存储员工登录记录（时间 / IP / 状态）
15	dict	数据字典表	统一维护系统状态值（如订单状态 / 菜品状态，避免硬编码）
3.2 完整表结构详情（含字段注释 / 关联关系 / 约束）
3.2.1 员工表（employee）- 核心管理端用户表
字段名	数据类型	长度	允许空	主键	自增	说明	备注 / 关联表
id	bigint	-	否	是	是	员工 ID	唯一标识
username	varchar	32	否	否	否	用户名	唯一，登录账号
password	varchar	64	否	否	否	密码	BCrypt 加密存储
name	varchar	32	否	否	否	员工姓名	
phone	varchar	11	否	否	否	手机号	唯一，加密存储
sex	varchar	2	是	否	否	性别	男 / 女 / 未知
id_number	varchar	18	是	否	否	身份证号	唯一，加密存储
role_id	bigint	-	否	否	否	角色 ID	关联role.id
branch_id	bigint	-	否	否	否	分店 ID	关联branch.id，数据范围控制
status	tinyint	-	否	否	否	账号状态	1 - 正常 0 - 锁定（字典项）
is_deleted	tinyint	-	否	否	否	软删除标识	1 - 已删 0 - 未删（默认 0）
create_time	datetime	-	否	否	否	创建时间	默认 CURRENT_TIMESTAMP
update_time	datetime	-	否	否	否	最后修改时间	ON UPDATE CURRENT_TIMESTAMP
create_user	bigint	-	否	否	否	创建人 ID	关联employee.id
update_user	bigint	-	否	否	否	最后修改人 ID	关联employee.id
3.2.2 角色表（role）- 权限控制核心表
字段名	数据类型	长度	允许空	主键	自增	说明	备注
id	bigint	-	否	是	是	角色 ID	唯一标识
name	varchar	32	否	否	否	角色名称	唯一（如 “管理员”“后厨”）
description	varchar	128	是	否	否	角色描述	如 “系统最高权限，可操作所有模块”
status	tinyint	-	否	否	否	角色状态	1 - 启用 0 - 禁用（默认 1）
create_time	datetime	-	否	否	否	创建时间	默认 CURRENT_TIMESTAMP
update_time	datetime	-	否	否	否	最后修改时间	ON UPDATE CURRENT_TIMESTAMP
create_user	bigint	-	否	否	否	创建人 ID	关联employee.id
update_user	bigint	-	否	否	否	最后修改人 ID	关联employee.id
3.2.3 权限表（permission）- 菜单 / 按钮权限表
字段名	数据类型	长度	允许空	主键	自增	说明	备注
id	bigint	-	否	是	是	权限 ID	唯一标识
name	varchar	32	否	否	否	权限名称	如 “菜品删除”“订单导出”
type	tinyint	-	否	否	否	权限类型	1 - 菜单权限 2 - 按钮权限
path	varchar	64	是	否	否	路由路径 / 按钮标识	菜单权限填路由（如 “/dish”），按钮权限填标识（如 “dish:delete”）
parent_id	bigint	-	是	否	否	父权限 ID	菜单权限的父级菜单（如 “菜品管理” 是 “菜品列表” 的父权限）
sort	int	-	否	否	否	排序值	越小越靠前（默认 0）
status	tinyint	-	否	否	否	权限状态	1 - 启用 0 - 禁用（默认 1）
3.2.4 角色权限关联表（role_permission）- 多对多关联
字段名	数据类型	长度	允许空	主键	自增	说明	备注 / 关联表
id	bigint	-	否	是	是	关联 ID	唯一标识
role_id	bigint	-	否	否	否	角色 ID	关联role.id
permission_id	bigint	-	否	否	否	权限 ID	关联permission.id
UNIQUE KEY	(role_id, permission_id)	-	-	-	-	角色 - 权限唯一关联	避免重复分配权限
3.2.5 分类表（category）- 菜品 / 套餐分类
字段名	数据类型	长度	允许空	主键	自增	说明	备注 / 关联表
id	bigint	-	否	是	是	分类 ID	唯一标识
name	varchar	32	否	否	否	分类名称	唯一（同类型下）
type	tinyint	-	否	否	否	分类类型	1 - 菜品分类 2 - 套餐分类（字典项）
sort	int	-	否	否	否	排序值	越小越靠前（默认 0）
status	tinyint	-	否	否	否	分类状态	1 - 启用 0 - 禁用（默认 1）
branch_id	bigint	-	否	否	否	分店 ID	关联branch.id，支持分店独立分类
is_deleted	tinyint	-	否	否	否	软删除标识	1 - 已删 0 - 未删（默认 0）
create_time	datetime	-	否	否	否	创建时间	默认 CURRENT_TIMESTAMP
update_time	datetime	-	否	否	否	最后修改时间	ON UPDATE CURRENT_TIMESTAMP
create_user	bigint	-	否	否	否	创建人 ID	关联employee.id
update_user	bigint	-	否	否	否	最后修改人 ID	关联employee.id
3.2.6 菜品表（dish）- 核心商品表
字段名	数据类型	长度	允许空	主键	自增	说明	备注 / 关联表
id	bigint	-	否	是	是	菜品 ID	唯一标识
name	varchar	32	否	否	否	菜品名称	唯一（同分店下）
category_id	bigint	-	否	否	否	分类 ID	关联category.id（type=1）
price	decimal	10,2	否	否	否	基础单价	如 “28.00”
specifications	json	-	是	否	否	规格配置	如{"large":38.00,"small":28.00}
image	varchar	255	是	否	否	菜品图片地址	OSS 存储路径
description	varchar	255	是	否	否	菜品描述	如 “经典川菜，微辣鲜香”
status	tinyint	-	否	否	否	售卖状态	1 - 起售 0 - 停售（默认 1）
branch_id	bigint	-	否	否	否	分店 ID	关联branch.id，支持分店独立菜品
is_deleted	tinyint	-	否	否	否	软删除标识	1 - 已删 0 - 未删（默认 0）
create_time	datetime	-	否	否	否	创建时间	默认 CURRENT_TIMESTAMP
update_time	datetime	-	否	否	否	最后修改时间	ON UPDATE CURRENT_TIMESTAMP
create_user	bigint	-	否	否	否	创建人 ID	关联employee.id
update_user	bigint	-	否	否	否	最后修改人 ID	关联employee.id
3.2.7 菜品口味表（dish_flavor）- 菜品多口味配置
字段名	数据类型	长度	允许空	主键	自增	说明	备注 / 关联表
id	bigint	-	否	是	是	口味 ID	唯一标识
dish_id	bigint	-	否	否	否	菜品 ID	关联dish.id（删除菜品时级联删除）
name	varchar	32	否	否	否	口味名称	如 “辣度”“甜度”
value	varchar	255	否	否	否	口味值	如 “微辣，中辣，特辣”“少糖，正常，多糖”
create_time	datetime	-	否	否	否	创建时间	默认 CURRENT_TIMESTAMP
update_time	datetime	-	否	否	否	最后修改时间	ON UPDATE CURRENT_TIMESTAMP
3.2.8 套餐表（setmeal）- 组合商品表
字段名	数据类型	长度	允许空	主键	自增	说明	备注 / 关联表
id	bigint	-	否	是	是	套餐 ID	唯一标识
name	varchar	32	否	否	否	套餐名称	唯一（同分店下）
category_id	bigint	-	否	否	否	分类 ID	关联category.id（type=2）
price	decimal	10,2	否	否	否	套餐总价	必须≥关联菜品总价之和
image	varchar	255	是	否	否	套餐图片地址	OSS 存储路径
description	varchar	255	是	否	否	套餐描述	如 “2 人份超值套餐，含 3 菜 1 汤”
status	tinyint	-	否	否	否	售卖状态	1 - 起售 0 - 停售（默认 1）；关联菜品停售时自动停售
branch_id	bigint	-	否	否	否	分店 ID	关联branch.id，支持分店独立套餐
is_deleted	tinyint	-	否	否	否	软删除标识	1 - 已删 0 - 未删（默认 0）
create_time	datetime	-	否	否	否	创建时间	默认 CURRENT_TIMESTAMP
update_time	datetime	-	否	否	否	最后修改时间	ON UPDATE CURRENT_TIMESTAMP
create_user	bigint	-	否	否	否	创建人 ID	关联employee.id
update_user	bigint	-	否	否	否	最后修改人 ID	关联employee.id
3.2.9 套餐菜品关系表（setmeal_dish）- 多对多关联
字段名	数据类型	长度	允许空	主键	自增	说明	备注 / 关联表
id	bigint	-	否	是	是	关联 ID	唯一标识
setmeal_id	bigint	-	否	否	否	套餐 ID	关联setmeal.id（删除套餐时级联删除）
dish_id	bigint	-	否	否	否	菜品 ID	关联dish.id（菜品删除时级联删除）
name	varchar	32	否	否	否	菜品名称	冗余字段（避免查询时关联菜品表）
price	decimal	10,2	否	否	否	菜品单价	冗余字段（记录关联时的菜品价格）
copies	int	-	否	否	否	菜品份数	如 “1”“2”
sort	int	-	否	否	否	排序值	套餐内菜品展示顺序（默认 0）
3.2.10 订单表（orders）- 核心业务表
字段名	数据类型	长度	允许空	主键	自增	说明	备注 / 字典项
id	bigint	-	否	是	是	订单 ID	唯一标识
number	varchar	50	否	否	否	订单号	唯一（格式：年月日 + 随机数）
status	tinyint	-	否	否	否	订单状态	1 - 待付款 2 - 待接单 3 - 已接单 4 - 派送中 5 - 已完成 6 - 已取消
branch_id	bigint	-	否	否	否	分店 ID	关联branch.id
consignee	varchar	32	否	否	否	收货人	
phone	varchar	11	否	否	否	收货人手机号	
address	varchar	255	否	否	否	详细地址	具体到门牌号
order_time	datetime	-	否	否	否	下单时间	
checkout_time	datetime	-	是	否	否	付款时间	未付款时为 NULL
pay_method	tinyint	-	是	否	否	支付方式	1 - 微信支付 2 - 支付宝支付（字典项）
pay_status	tinyint	-	否	否	否	支付状态	0 - 未支付 1 - 已支付 2 - 退款（字典项）
amount	decimal	10,2	否	否	否	订单总金额	菜品总价 + 打包费
pack_amount	decimal	10,2	否	否	否	打包费	如 “2.00”（系统配置）
tableware_number	int	-	否	否	否	餐具数量	如 “2”
tableware_status	tinyint	-	否	否	否	餐具状态	1 - 按餐量提供 0 - 自定义数量（字典项）
remark	varchar	100	是	否	否	订单备注	如 “少放辣”
cancel_reason	varchar	255	是	否	否	取消原因	状态为 6 时必填
rejection_reason	varchar	255	是	否	否	拒单原因	状态为 “拒单” 时必填
cancel_time	datetime	-	是	否	否	取消时间	状态为 6 时非空
estimated_delivery_time	datetime	-	是	否	否	预计送达时间	
delivery_time	datetime	-	是	否	否	实际送达时间	状态为 5 时非空
create_time	datetime	-	否	否	否	创建时间	默认 CURRENT_TIMESTAMP
update_time	datetime	-	否	否	否	最后修改时间	ON UPDATE CURRENT_TIMESTAMP
update_user	bigint	-	否	否	否	最后修改人 ID	关联employee.id（员工操作订单时记录）
3.2.11 订单明细表（order_detail）- 订单商品明细
字段名	数据类型	长度	允许空	主键	自增	说明	备注 / 关联表
id	bigint	-	否	是	是	明细 ID	唯一标识
order_id	bigint	-	否	否	否	订单 ID	关联orders.id（删除订单时级联删除）
name	varchar	32	否	否	否	商品名称	菜品 / 套餐名称
image	varchar	255	是	否	否	商品图片地址	OSS 存储路径（冗余）
dish_id	bigint	-	是	否	否	菜品 ID	商品为菜品时非空，关联dish.id
setmeal_id	bigint	-	是	否	否	套餐 ID	商品为套餐时非空，关联setmeal.id
dish_flavor	varchar	50	是	否	否	菜品口味	商品为菜品时可选（如 “微辣 + 少糖”）
number	int	-	否	否	否	商品数量	如 “1”“2”
amount	decimal	10,2	否	否	否	商品单价	菜品 / 套餐单价
total_amount	decimal	10,2	否	否	否	商品总价	amount × number
create_time	datetime	-	否	否	否	创建时间	默认 CURRENT_TIMESTAMP
3.2.12 分店表（branch）- 多分店管理表
字段名	数据类型	长度	允许空	主键	自增	说明	备注
id	bigint	-	否	是	是	分店 ID	唯一标识
name	varchar	64	否	否	否	分店名称	唯一（如 “总店”“朝阳分店”）
address	varchar	255	否	否	否	分店地址	具体到门牌号
contact_name	varchar	32	否	否	否	联系人	
contact_phone	varchar	11	否	否	否	联系人手机号	
status	tinyint	-	否	否	否	分店状态	1 - 启用 0 - 禁用（默认 1）
is_deleted	tinyint	-	否	否	否	软删除标识	1 - 已删 0 - 未删（默认 0）
create_time	datetime	-	否	否	否	创建时间	默认 CURRENT_TIMESTAMP
update_time	datetime	-	否	否	否	最后修改时间	ON UPDATE CURRENT_TIMESTAMP
create_user	bigint	-	否	否	否	创建人 ID	关联employee.id
update_user	bigint	-	否	否	否	最后修改人 ID	关联employee.id
3.2.13 操作日志表（operation_log）- 敏感操作审计
字段名	数据类型	长度	允许空	主键	自增	说明	备注 / 关联表
id	bigint	-	否	是	是	日志 ID	唯一标识
operator_id	bigint	-	否	否	否	操作人 ID	关联employee.id
operator_name	varchar	32	否	否	否	操作人姓名	冗余字段（避免关联员工表）
branch_id	bigint	-	否	否	否	操作分店 ID	关联branch.id（数据范围审计）
module	varchar	32	否	否	否	操作模块	如 “菜品管理”“订单管理”
operation_type	varchar	16	否	否	否	操作类型	新增 / 修改 / 删除 / 批量操作 / 导入 / 导出
content	varchar	255	否	否	否	操作内容	如 “新增菜品：鱼香肉丝（ID:1）”“批量下架套餐：双人套餐（ID:2,3）”
ip	varchar	32	否	否	否	操作 IP 地址	如 “127.0.0.1”“192.168.1.100”
operation_time	datetime	-	否	否	否	操作时间	默认 CURRENT_TIMESTAMP
status	tinyint	-	否	否	否	操作状态	1 - 成功 0 - 失败（默认 1）
error_msg	varchar	512	是	否	否	错误信息	操作失败时记录（如 “菜品名称重复”）
3.2.14 登录日志表（login_log）- 登录审计
字段名	数据类型	长度	允许空	主键	自增	说明	备注 / 关联表
id	bigint	-	否	是	是	日志 ID	唯一标识
employee_id	bigint	-	否	否	否	员工 ID	关联employee.id（未登录成功时为 0）
username	varchar	32	否	否	否	登录用户名	即使登录失败也记录
branch_id	bigint	-	是	否	否	所属分店 ID	登录成功后关联employee.branch_id
ip	varchar	32	否	否	否	登录 IP 地址	
login_time	datetime	-	否	否	否	登录时间	默认 CURRENT_TIMESTAMP
status	tinyint	-	否	否	否	登录状态	1 - 成功 0 - 失败（字典项）
error_msg	varchar	255	是	否	否	失败原因	如 “密码错误”“账号锁定”
user_agent	varchar	512	是	否	否	浏览器 / 设备信息	如 “Chrome/120.0.0.0”
3.2.15 数据字典表（dict）- 统一状态管理
字段名	数据类型	长度	允许空	主键	自增	说明	备注
id	bigint	-	否	是	是	字典 ID	唯一标识
dict_type	varchar	32	否	否	否	字典类型	唯一（如 “order_status”“dish_status”）
dict_code	int	-	否	否	否	字典编码	同类型下唯一（如 1/2/3）
dict_label	varchar	32	否	否	否	字典标签	如 “待付款”“起售”
dict_desc	varchar	128	是	否	否	字典描述	如 “订单状态：待付款”
sort	int	-	否	否	否	排序值	越小越靠前（默认 0）
status	tinyint	-	否	否	否	字典状态	1 - 启用 0 - 禁用（默认 1）
create_time	datetime	-	否	否	否	创建时间	默认 CURRENT_TIMESTAMP
update_time	datetime	-	否	否	否	最后修改时间	ON UPDATE CURRENT_TIMESTAMP
3.3 索引设计（优化查询性能）
表名	索引字段	索引类型	索引名称	用途说明
employee	username	UNIQUE	uk_emp_username	唯一约束，快速登录查询
employee	phone	UNIQUE	uk_emp_phone	唯一约束，手机号查询
employee	role_id, branch_id, status	组合索引	idx_emp_role_branch_status	按角色 / 分店 / 状态筛选员工
role	name	UNIQUE	uk_role_name	唯一约束，角色名称查询
category	name, type, branch_id	UNIQUE	uk_cat_name_type_branch	同分店同类型分类名称唯一
category	type, status, branch_id	组合索引	idx_cat_type_status_branch	按类型 / 状态 / 分店筛选分类
dish	name, branch_id	UNIQUE	uk_dish_name_branch	同分店菜品名称唯一
dish	category_id, status, branch_id	组合索引	idx_dish_cat_status_branch	按分类 / 状态 / 分店筛选菜品
setmeal	name, branch_id	UNIQUE	uk_setmeal_name_branch	同分店套餐名称唯一
setmeal	category_id, status, branch_id	组合索引	idx_setmeal_cat_status_branch	按分类 / 状态 / 分店筛选套餐
orders	number	UNIQUE	uk_order_number	唯一约束，订单号快速查询
orders	status, order_time, branch_id	组合索引	idx_order_status_time_branch	按状态 / 时间 / 分店筛选订单
orders	consignee, phone	组合索引	idx_order_consignee_phone	按收货人 / 手机号查询订单
order_detail	order_id	普通索引	idx_od_order_id	关联订单查询明细
order_detail	dish_id	普通索引	idx_od_dish_id	按菜品查询订单明细
order_detail	setmeal_id	普通索引	idx_od_setmeal_id	按套餐查询订单明细
operation_log	operator_id, operation_time	组合索引	idx_oplog_operator_time	按操作人 / 时间查询日志
operation_log	module, operation_type	组合索引	idx_oplog_module_type	按模块 / 操作类型查询日志
login_log	employee_id, login_time	组合索引	idx_loginlog_emp_time	按员工 / 时间查询登录日志
login_log	username, status	组合索引	idx_loginlog_username_status	按用户名 / 登录状态查询日志
3.4 外键约束（确保数据一致性）
主表名	主表字段	从表名	从表字段	约束类型	说明
role	id	employee	role_id	级联更新	角色 ID 修改时，员工表关联字段同步更新
branch	id	employee	branch_id	级联更新	分店 ID 修改时，员工表关联字段同步更新
branch	id	category	branch_id	级联更新	分店 ID 修改时，分类表关联字段同步更新
branch	id	dish	branch_id	级联更新	分店 ID 修改时，菜品表关联字段同步更新
branch	id	setmeal	branch_id	级联更新	分店 ID 修改时，套餐表关联字段同步更新
branch	id	orders	branch_id	级联更新	分店 ID 修改时，订单表关联字段同步更新
category	id	dish	category_id	级联更新	分类 ID 修改时，菜品表关联字段同步更新
category	id	setmeal	category_id	级联更新	分类 ID 修改时，套餐表关联字段同步更新
dish	id	dish_flavor	dish_id	级联删除	删除菜品时，关联口味记录同步删除
dish	id	setmeal_dish	dish_id	级联删除	删除菜品时，关联套餐菜品记录同步删除
setmeal	id	setmeal_dish	setmeal_id	级联删除	删除套餐时，关联菜品记录同步删除
orders	id	order_detail	order_id	级联删除	删除订单时，关联明细记录同步删除
employee	id	operation_log	operator_id	无级联	员工删除时，操作日志保留员工 ID（历史审计）
employee	id	login_log	employee_id	无级联	员工删除时，登录日志保留员工 ID（历史审计）
四、核心功能模块清单（完整细化，无遗漏）
4.1 模块总览（9 大核心模块，覆盖全业务）
模块名称	核心职责	关联数据库表
登录认证模块	员工登录 / 退出、Token 生成验证、登录失败限制、登录日志记录	employee、login_log、role、permission
员工管理模块	员工 CRUD、角色分配、密码重置、批量启用 / 锁定、数据范围控制	employee、role、branch、operation_log
权限管理模块	角色 CRUD、菜单 / 按钮权限分配、权限拦截、数据字典维护	role、permission、role_permission、dict
分店管理模块	分店 CRUD、分店状态管理、分店数据隔离	branch、operation_log
分类管理模块	菜品 / 套餐分类 CRUD、拖拽排序、批量启用 / 禁用、删除关联校验	category、dish、setmeal、operation_log
菜品管理模块	菜品 CRUD、口味管理、规格配置、OSS 图片上传、批量上下架、导入导出	dish、dish_flavor、category、operation_log
套餐管理模块	套餐 CRUD、菜品关联、自动计价、批量上下架、状态联动、导入导出	setmeal、setmeal_dish、dish、category、operation_log
订单管理模块	订单 CRUD、状态流转、多条件查询、订单详情、批量导出、异常处理（取消 / 拒单）	orders、order_detail、branch、operation_log
数据统计模块	营业数据统计、销量排行、订单分析、数据可视化、报表导出	orders、order_detail、dish、setmeal、branch
4.2 各模块详细功能（含业务逻辑约束）
4.2.1 登录认证模块
功能点	详细说明	业务约束
员工登录	用户名 + 密码登录，验证账号状态（正常 / 锁定），生成 JWT Token	1. 用户名 / 密码错误 3 次，账号锁定 15 分钟；2. 锁定状态无法登录；3. Token 有效期 2 小时
员工退出	前端清除 Token，后端记录退出日志（可选）	退出后 Token 失效，需重新登录
登录日志查询	多条件分页查询（员工姓名 / 时间范围 / 登录状态 / IP）	仅管理员可查看所有登录日志，分店员工仅查看本店员工登录日志
账号解锁	管理员手动解锁被锁定的员工账号	仅角色为 “管理员” 的用户可操作
4.2.2 员工管理模块
功能点	详细说明	业务约束
员工列表查询	多条件分页查询（姓名 / 手机号 / 角色 / 分店 / 状态）、模糊搜索	1. 管理员查看所有员工；2. 分店管理员仅查看本店员工
员工新增	填写员工信息（用户名 / 密码 / 姓名 / 手机号等），分配角色和分店	1. 用户名 / 手机号唯一；2. 初始密码默认 123456（强制首次登录修改）；3. 敏感字段加密存储
员工修改	修改员工基本信息、角色、分店、状态	1. 不可修改用户名；2. 修改敏感字段需记录操作日志
密码重置	管理员重置员工密码为默认值，员工本人可修改密码	1. 重置密码需记录操作日志；2. 员工修改密码需验证原密码
批量操作	批量启用 / 锁定员工账号、批量删除（软删除）	1. 不可批量删除管理员账号；2. 批量操作需记录操作日志
数据范围控制	基于分店 ID 过滤数据，分店员工仅能操作本店相关数据	1. 管理员无数据范围限制；2. 分店员工的所有查询接口自动携带 branch_id 参数
4.2.3 权限管理模块
功能点	详细说明	业务约束
角色列表查询	分页查询所有角色，支持名称模糊搜索	所有登录员工均可查看角色列表（不可修改）
角色新增	创建角色（名称 / 描述 / 状态），分配菜单 / 按钮权限	1. 角色名称唯一；2. 仅管理员可操作
角色修改	修改角色信息、权限分配	1. 不可修改 “管理员” 角色的权限；2. 修改后实时生效
角色删除	软删除角色	1. 角色关联员工时不可删除；2. 不可删除 “管理员” 角色
数据字典管理	字典类型 / 编码 / 标签 CRUD，统一维护系统状态值	1. 字典类型 + 编码唯一；2. 仅管理员可操作；3. 已使用的字典项不可删除
权限拦截	后端拦截无权限操作，前端隐藏无权限按钮	1. 接口级权限：无权限返回 403；2. 按钮级权限：前端 v-if 控制显示隐藏
4.2.4 分店管理模块
功能点	详细说明	业务约束
分店列表查询	分页查询所有分店，支持名称 / 状态模糊搜索	1. 管理员查看所有分店；2. 分店员工仅查看本店信息
分店新增	创建分店（名称 / 地址 / 联系人 / 手机号 / 状态）	1. 分店名称唯一；2. 仅管理员可操作
分店修改	修改分店信息、状态	1. 分店状态修改为 “禁用” 时，关联的员工 / 分类 / 菜品 / 套餐自动禁用；2. 仅管理员可操作
分店删除	软删除分店	1. 分店关联员工 / 订单时不可删除；2. 仅管理员可操作
4.2.5 分类管理模块
功能点	详细说明	业务约束
分类列表查询	按类型（菜品 / 套餐）、状态、分店分页查询，支持名称模糊搜索	1. 分店员工仅查看本店分类；2. 默认按 sort 字段升序排列
分类新增	创建分类（名称 / 类型 / 排序 / 分店）	1. 同分店同类型分类名称唯一；2. 排序值默认 0（越小越靠前）
分类修改	修改分类信息、排序、状态	1. 分类状态修改为 “禁用” 时，关联的菜品 / 套餐自动禁用；2. 仅管理员 / 分店管理员可操作
分类删除	软删除分类	1. 分类关联菜品 / 套餐时不可删除；2. 仅管理员 / 分店管理员可操作
拖拽排序	可视化拖拽调整分类顺序，自动更新 sort 字段	1. 仅同类型分类可排序；2. 排序后实时生效
批量操作	批量启用 / 禁用分类	1. 批量操作需记录操作日志；2. 仅管理员 / 分店管理员可操作
4.2.6 菜品管理模块
功能点	详细说明	业务约束
菜品列表查询	按分类 / 状态 / 分店分页查询，支持名称模糊搜索，显示菜品基础信息 + 口味 + 规格	1. 分店员工仅查看本店菜品；2. 支持按创建时间 / 价格排序
菜品新增	填写菜品信息（名称 / 分类 / 价格 / 规格 / 描述），上传 OSS 图片，配置口味	1. 同分店菜品名称唯一；2. 价格≥0；3. 至少关联一个分类；4. 仅管理员 / 分店管理员可操作
菜品修改	修改菜品信息、口味、规格、图片，更新 OSS 图片	1. 修改后关联套餐的菜品名称 / 价格同步更新（冗余字段）；2. 仅管理员 / 分店管理员可操作
菜品删除	软删除菜品	1. 菜品关联套餐 / 未完成订单时不可删除；2. 仅管理员 / 分店管理员可操作
口味管理	为菜品添加多个口味（如 “辣度”“甜度”），每个口味支持多个值	1. 同一菜品的口味名称唯一；2. 口味值用逗号分隔（如 “微辣，中辣，特辣”）
规格管理	配置菜品规格（如 “大份 / 小份”），不同规格对应不同价格	1. 规格 JSON 格式必须合法；2. 规格价格≥0
图片上传（OSS）	上传菜品图片至阿里云 OSS，返回图片地址存入数据库	1. 支持 jpg/png/jpeg 格式；2. 单文件大小≤5MB；3. 上传失败返回错误提示
批量上下架	批量修改菜品售卖状态（起售 / 停售）	1. 批量操作需记录操作日志；2. 仅管理员 / 分店管理员可操作
导入导出	Excel 批量导入菜品（含口味 / 规格），导出菜品列表（含基础信息 + 口味 + 规格）	1. 导入时校验数据合法性（名称唯一 / 价格≥0）；2. 仅管理员 / 分店管理员可操作
4.2.7 套餐管理模块
功能点	详细说明	业务约束
套餐列表查询	按分类 / 状态 / 分店分页查询，支持名称模糊搜索，显示套餐基础信息 + 关联菜品	1. 分店员工仅查看本店套餐；2. 支持按创建时间 / 价格排序
套餐新增	填写套餐信息（名称 / 分类 / 价格 / 描述），上传 OSS 图片，关联菜品（选择菜品 + 份数）	1. 同分店套餐名称唯一；2. 套餐总价≥关联菜品总价之和；3. 至少关联一个菜品；4. 仅管理员 / 分店管理员可操作
套餐修改	修改套餐信息、图片、关联菜品，重新计算套餐总价	1. 关联菜品修改后重新计算总价（≥菜品总价）；2. 仅管理员 / 分店管理员可操作
套餐删除	软删除套餐	1. 套餐关联未完成订单时不可删除；2. 仅管理员 / 分店管理员可操作
状态联动	关联菜品停售时，套餐自动停售并记录日志	1. 联动停售后需手动重新起售；2. 记录操作日志（系统自动操作）
批量上下架	批量修改套餐售卖状态（起售 / 停售）	1. 批量操作需记录操作日志；2. 仅管理员 / 分店管理员可操作
导出套餐列表	Excel 导出套餐列表（含基础信息 + 关联菜品）	1. 支持按条件筛选后导出；2. 仅管理员 / 分店管理员可操作
4.2.8 订单管理模块
功能点	详细说明	业务约束
订单列表查询	多条件分页查询（订单号 / 收货人 / 手机号 / 状态 / 时间范围 / 分店），支持模糊搜索	1. 分店员工仅查看本店订单；2. 支持按下单时间 / 金额排序
订单详情查询	查看订单核心信息（状态 / 金额 / 收货信息 / 支付信息）+ 商品明细（菜品 / 套餐 / 口味 / 数量）	1. 所有登录员工均可查看（按数据范围过滤）；2. 明细显示商品图片 / 名称 / 单价 / 总价
订单状态修改	订单状态流转（待接单→已接单→派送中→已完成 / 已取消），记录操作人 / 时间	1. 状态流转必须合法（如已完成订单不可取消）；2. 取消 / 拒单需填写原因；3. 仅管理员 / 分店管理员可操作
订单异常处理	取消订单（未支付 / 已支付）、拒单（待接单）、退款处理（已支付）	1. 已支付订单取消后需触发退款流程；2. 退款状态同步更新至订单表；3. 仅管理员 / 分店管理员可操作
订单导出	Excel 导出订单列表（含核心信息 + 商品明细）	1. 支持按条件筛选后导出；2. 仅管理员 / 分店管理员可操作
订单日志查看	查看订单状态变更日志（操作人 / 时间 / 状态 / 原因）	所有登录员工均可查看（按数据范围过滤）
4.2.9 数据统计模块
功能点	详细说明	业务约束
营业数据统计	按时间范围（今日 / 昨日 / 本周 / 本月 / 自定义）统计营业额 / 订单数 / 客单价 / 退款金额	1. 管理员查看全部分店数据，可按分店筛选；2. 分店员工仅查看本店数据
销量排行	按时间范围统计菜品 / 套餐销量 TOP10、分类销量占比	1. 支持按分店筛选；2. 图表展示（柱状图 / 饼图）
订单分析	按时间范围统计各状态订单数分布、支付方式占比、下单时段高峰	1. 支持按分店筛选；2. 图表展示（折线图 / 饼图）
数据可视化	ECharts 图表展示营业趋势、销量排行、订单分布，支持切换时间范围 / 分店	1. 图表支持下载（PNG 格式）；2. 数据实时计算（基于 MySQL 聚合查询）
报表导出	导出统计报表（Excel/PDF 格式），含营业数据 / 销量排行 / 订单分析	1. 支持按条件筛选后导出；2. 仅管理员 / 分店管理员可操作
五、完整 Web 管理端接口文档（含所有模块，详细参数 + 响应）
文档说明
接口基准地址：http://localhost:8080/api（开发环境）、https://xxx.com/api（生产环境）
请求头统一携带：Authorization: Bearer {JWT Token}（员工登录后获取）
统一返回格式：
json
{
  "code": 200,        // 200-成功 500-系统异常 401-未登录 403-无权限 400-参数错误
  "msg": "操作成功",   // 提示信息
  "data": {}          // 业务数据（分页数据统一为{total: 总数, list: 列表}）
}
分页参数：所有列表查询接口默认支持 pageNum=1（页码）、pageSize=10（每页条数）
日期参数：所有时间范围查询参数格式为 yyyy-MM-dd HH:mm:ss（如beginTime=2025-01-01 00:00:00）
操作人 / 操作时间：所有增删改接口自动记录create_user/update_user/create_time/update_time，无需前端传入
JWT Payload 需包含：empId (员工ID), branchId (分店ID), username (用户名)。不包含敏感信息（如密码）。
在 application.yml 中预留阿里云 OSS 的配置项：aliyun.oss.endpoint, aliyun.oss.accessKeyId, aliyun.oss.bucketName。并且我的环境变量里已经有OSS_ACCESS_KEY_ID,OSS_ACCESS_KEY_SECRET。
jdk版本为21.0.8
node js版本为v24.10.0